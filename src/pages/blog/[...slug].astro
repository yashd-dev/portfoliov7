---
import { getEntry } from "astro:content";
import Layout from "../layout.astro";
import slugify from "slugify";
import { Image } from "astro:assets";
const { slug } = Astro.params;
if (slug === undefined) {
	throw new Error("Slug is required");
}
const entry = await getEntry("posts", slug);
if (entry === undefined) {
	return Astro.redirect("/blog");
}
const { Content, remarkPluginFrontmatter } = await entry.render();

if (entry.data.production == false) {
	return Astro.redirect("/blog");
}
let options = {
	lower: true,
	trim: true,
	remove: undefined as undefined,
};
import { unslugify } from "../../utils/posts";
---

<Layout
	title={entry.data.title+"Yash D"} 
	imgurl=`https://yashd.in/og/${slugify(entry.data.title, {
			lower: true,
			trim: true,
			remove: undefined,
		})}.png`
	description={entry.data.description}
>

	<section class="px-6 sm:px-10 md:px-20 lg:px-40 pt-16 sm:pt-20 pb-8 sm:pb-10">
		<div class="max-w-[1920px] mx-auto">
			<div class="border-t border-b border-white/20 py-4 mb-8">
				<div class="flex items-center justify-between">
					<div class="flex-1 flex items-center gap-8">
						<span
							class="text-sm font-mono text-white/70 uppercase tracking-wide"
							>Blog Post</span
						>
						<span
							class="text-xs font-mono text-white/50 uppercase tracking-wide"
							>Article</span
						>
					</div>
					<span class="text-xs font-mono text-white/50 uppercase tracking-wide"
						>Reading</span
					>
				</div>
			</div>
			
			<div class="flex items-center justify-between mb-8 sm:mb-12">
				<a
					href="/blog"
					class="group inline-flex items-center gap-2 text-white/60 hover:text-white transition-colors duration-300"
				>
					<svg
						xmlns="http://www.w3.org/2000/svg"
						width="16"
						height="16"
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
						stroke-linecap="round"
						stroke-linejoin="round"
						class="lucide lucide-undo2-icon lucide-undo-2"
					>
						<path d="M9 14 4 9l5-5"></path>
						<path
							d="M4 9h10.5a5.5 5.5 0 0 1-5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11"
						></path>
					</svg>
					<span class="font-mono text-sm uppercase tracking-wide">Back to Blog</span>
				</a>
			</div>

			<article class="max-w-5xl mx-auto">
				<!-- Article Header -->
				<div class="border-t border-b border-white/20 py-6 mb-12">
					<div class="flex items-center justify-between">
						<div class="flex-1 flex items-center gap-8">
							<span class="text-sm font-mono text-white/70 uppercase tracking-wide">
								{new Date(entry.data.pubDate).toLocaleDateString("en-US", {
									month: "long",
									day: "numeric",
									year: "numeric",
								})}
							</span>
							<span class="text-xs font-mono text-white/50 uppercase tracking-wide">
								{remarkPluginFrontmatter.minutesRead}
							</span>
						</div>
						<span class="text-xs font-mono text-white/50 uppercase tracking-wide">
							Article
						</span>
					</div>
				</div>

				<!-- Title Section -->
				<div class="mb-16 text-center">
					<h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl font-bold leading-tight mb-8">
						<span class="block uppercase tracking-tighter text-cream">
							{entry.data.title}
						</span>
					</h1>
					
					<!-- Author Section -->
					<div class="flex items-center justify-center gap-6 mb-8">
						<div class="flex items-center gap-3">
							<Image
								class="w-10 h-10 aspect-square object-cover rounded-full border-2 border-white/20"
								src="/images/white.jpg"
								alt="Avatar for Yash D"
								height={40}
								width={40}
							/>
							<span class="font-mono text-base text-white/80 uppercase tracking-wide">
								Yash Deshpande
							</span>
						</div>
					</div>

					<!-- Tags Section -->
					<div class="flex flex-wrap items-center justify-center gap-3">
						{
							entry.data.tags.map((tag: string) => (
								<a 
									href=`/tags/${slugify(tag,options)}` 
									class="group px-5 py-2 rounded-full bg-white/5 border border-white/20 text-white/70 text-sm font-mono uppercase tracking-wide transition-all duration-300 hover:bg-white/10 hover:border-white/40 hover:text-white no-underline"
								>
									{unslugify(tag)}
								</a>
							))
						}
					</div>
				</div>

				<!-- Content Wrapper -->
				<div class="max-w-4xl mx-auto">
					<div class="prose prose-xl prose-invert max-w-none 
						prose-headings:text-cream prose-headings:font-serif prose-headings:mt-12 prose-headings:mb-6 prose-headings:leading-tight
						prose-h1:mt-16 prose-h1:mb-8 prose-h1:text-5xl
						prose-h2:mt-14 prose-h2:mb-6 prose-h2:text-4xl
						prose-h3:mt-12 prose-h3:mb-5 prose-h3:text-3xl
						prose-h4:mt-10 prose-h4:mb-4 prose-h4:text-2xl
						prose-p:text-cream/90 prose-p:leading-relaxed prose-p:text-justify prose-p:my-6 prose-p:text-lg
						prose-a:text-cream/80 prose-a:no-underline prose-a:font-medium hover:prose-a:text-cream prose-a:transition-colors prose-a:duration-300
						prose-strong:text-cream prose-strong:font-semibold
						prose-em:text-cream/80 prose-em:font-serif prose-em:italic
						prose-code:text-amber-300 prose-code:px-3 prose-code:py-2 prose-code:rounded prose-code:font-mono prose-code:text-base
						
						prose-blockquote:my-8 prose-blockquote:py-6 prose-blockquote:px-6 prose-blockquote:border-l-4 prose-blockquote:border-cream prose-blockquote:bg-white/5 prose-blockquote:text-cream/80 prose-blockquote:font-serif prose-blockquote:italic prose-blockquote:text-xl
						prose-ul:text-cream/90 prose-ul:my-6 prose-ul:space-y-2
						prose-ol:text-cream/90 prose-ol:my-6 prose-ol:space-y-2
						prose-li:text-cream/90 prose-li:leading-relaxed prose-li:text-lg
						prose-img:rounded-lg prose-img:shadow-2xl prose-img:mx-auto prose-img:border prose-img:border-white/20 prose-img:my-10
						prose-figure:mx-auto prose-figure:text-center prose-figure:my-10
						prose-figcaption:text-cream/60 prose-figcaption:text-base prose-figcaption:italic prose-figcaption:mt-4
						prose-table:border prose-table:border-white/20 prose-table:rounded-lg prose-table:overflow-hidden prose-table:my-8
						prose-thead:bg-white/10 prose-th:text-cream prose-th:font-semibold prose-th:uppercase prose-th:tracking-wide prose-th:text-sm prose-th:py-4 prose-th:px-6
						prose-td:text-cream/90 prose-td:border-white/10 prose-td:py-3 prose-td:px-6 prose-td:text-base
						prose-hr:border-white/20 prose-hr:my-12">
						<Content />
					</div>
				</div>

				<!-- Article Footer -->
				<div class="border-t border-white/20 pt-12 mt-16">
					<div class="flex items-center justify-between">
						<div class="flex-1 flex items-center gap-8">
							<span class="text-sm font-mono text-white/70 uppercase tracking-wide">
								End of Article
							</span>
							<span class="text-xs font-mono text-white/50 uppercase tracking-wide">
								Thanks for Reading
							</span>
						</div>
						<a
							href="/blog"
							class="group border border-cream px-6 py-3 rounded-full hover:bg-[radial-gradient(at_30%_150%,#ff66c4_0,transparent_50%),radial-gradient(at_75%_120%,rgba(255,102,204,0.9)_0,transparent_50%),radial-gradient(at_15%_150%,#e91e63_35%,transparent_70%),radial-gradient(at_85%_120%,#ff0080_55%,transparent_85%)] hover:border-zinc-950 transition-all duration-300 text-base whitespace-nowrap uppercase font-semibold text-cream"
						>
							Back to <span class="font-serif font-thin italic normal-case text-white text-xl transition-colors duration-300">Blog</span>
						</a>
					</div>
				</div>
			</article>
		</div>
	</section>
</Layout>

<style>
  .bg-gradient-pink {
    background-image: radial-gradient(at 30% 150%, #ff66c4 0, transparent 50%),
      radial-gradient(at 75% 120%, rgba(255, 102, 204, 0.9) 0, transparent 50%),
      radial-gradient(at 15% 150%, #e91e63 35%, transparent 70%),
      radial-gradient(at 85% 120%, #ff0080 55%, transparent 85%);
  }


</style>
